<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .card {
        border: 2px solid green;
        padding: 20px;
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <section class="card">
      <h3>Chuyển đổi chuyển số hoa - thường</h3>
      <input type="text" id="input-ex-3" />
      <button onclick="handleConvertString()">Chuyển đổi</button>
      <button onclick="handleConvertString2()">Chuyển đổi 2</button>
      <p id="result-ex-3"></p>
    </section>
    <section class="card">
      <h3>
        In ra chuỗi số nguyên tố bé hơn hoặc bằng N (nhập vào trong input)
      </h3>
      <input type="text" id="input-ex-4" />
      <button onclick="handleCheckPrime()">Check</button>
      <p id="result-ex-4"></p>
    </section>
    <section class="card">
      <h3>In ra chuỗi số hoàn hảo bé hơn hoặc bằng N (nhập vào trong input)</h3>
      <input type="text" id="input-ex-5" />
      <button onclick="handlePerfectNumber()">Check</button>
      <p id="result-ex-5"></p>
    </section>
    <section class="card">
      <h3>Nhập chuỗi vào input và tính tổng</h3>
      <input type="text" id="input-ex-6" placeholder="1,3,5,7,..." />
      <button onclick="handleSum()">Tổng</button>
      <button onclick="handleSum2()">Tổng 2</button>
      <button onclick="handleSum3()">Tổng 3</button>
      <p id="result-ex-6"></p>
    </section>

    <script>
      // Bài 3
      function handleConvertString() {
        // B1. Lấy được giá trị trong input
        const valueInput = document.querySelector("#input-ex-3").value;

        // B2. Tạo thư viện đối chiếu
        const UPPER = " QWERTYUIOPASDFGHJKLZXCVBNM";

        // B3. Khai báo biến để lấy kết quả
        let result = "";
        for (let i = 0; i < valueInput.length; i++) {
          let isUpper = false;
          for (let k = 0; k < UPPER.length; k++) {
            if (valueInput[i] === UPPER[k]) {
              result += valueInput[i].toLowerCase();
              isUpper = true;
              break;
            }
          }
          if (!isUpper) {
            result += valueInput[i].toUpperCase();
          }
        }
        console.log("Kiểm tra", result);
        // B4. Tìm element sẽ hiển thị kết quả và gán hiển thị
        const resultElement = document.querySelector("#result-ex-3");
        resultElement.innerHTML = result;
      }

      function handleConvertString2() {
        // B1. Lấy được giá trị trong input
        const valueInput = document.querySelector("#input-ex-3").value;

        // B2. Tạo thư viện đối chiếu
        const UPPER = " QWERTYUIOPASDFGHJKLZXCVBNM";

        // B3. Khai báo biến để lấy kết quả
        let result = "";
        for (let i = 0; i < valueInput.length; i++) {
          if (UPPER.includes(valueInput[i])) {
            result += valueInput[i].toLowerCase();
          } else {
            result += valueInput[i].toUpperCase();
          }
        }
        const resultElement = document.querySelector("#result-ex-3");
        resultElement.innerHTML = result;
      }

      function handleCheckPrime() {
        // B1. Lấy được giá trị trong input
        const valueInput = Number(document.querySelector("#input-ex-4").value);

        let result = "";

        // B2. Kiểm tra chuỗi số từ 0 đến N
        for (let m = 0; m <= valueInput; m++) {
          // B3. Kiểm tra từng số thứ m có là số nguyên tố hay không
          let isPrime = true;
          //   Các số bé hơn 2 không phải là số nguyên tố
          if (m < 2) {
            isPrime = false;
          } else {
            for (i = 2; i < m; i++) {
              // <= Math.sqrt(m) --> rút ngắn vòng lặp+
              // Kiểm tra số m có chia hết cho từng số thứ i hay không
              if (m % i == 0) {
                isPrime = false;
                break;
              }
            }
          }

          //   B4. Nếu là số nguyên tố, thì được thêm vào kết quả
          if (isPrime) {
            result += m + " ";
          }
        }

        console.log("Kiểm tra", result);
        // B5. Tìm element sẽ hiển thị kết quả và gán hiển thị
        const resultElement = document.querySelector("#result-ex-4");
        resultElement.innerHTML = result;
      }

      function handlePerfectNumber() {
        // B1. Lấy được giá trị trong input
        const valueInput = Number(document.querySelector("#input-ex-5").value);

        let result = "";
        for (let i = 1; i <= valueInput; i++) {
          let sum = 0;
          for (let k = 0; k < i; k++) {
            if (i % k == 0) {
              sum += k;
            }
          }
          if (sum == i) {
            result += i + " ";
          }
        }
        const resultElement = document.querySelector("#result-ex-5");
        resultElement.innerHTML = result;
      }

      function handleSum() {
        // B1. Lấy được giá trị trong input
        const valueInput = document.querySelector("#input-ex-6").value;

        // B2. Chuyển đổi String thành Array
        const converString = valueInput.split(",");

        // b3. Đặt biến sum để tính tổng --> let vì giá trị được gán sau mỗi lần lặp

        let sum = 0;
        // B4. Lặp và công từng phần tử trong mảng
        for (let i = 0; i < converString.length; i++) {
          sum += Number(converString[i]);
        }

        // B5. Hiển thị kết quả
        const resultElement = document.querySelector("#result-ex-6");
        resultElement.innerHTML = sum;
      }
      function handleSum2() {
        // B1. Lấy được giá trị trong input
        const valueInput = document.querySelector("#input-ex-6").value;

        // B2. Chuyển đổi String thành Array
        const converString = valueInput.split(",");

        // b3. Đặt biến sum để tính tổng --> let vì giá trị được gán sau mỗi lần lặp

        let sum = 0;
        // B4. Lặp và công từng phần tử trong mảng dùng for of
        for (const number of converString) {
          sum += Number(number);
        }

        // B5. Hiển thị kết quả
        const resultElement = document.querySelector("#result-ex-6");
        resultElement.innerHTML = sum;
      }

      function handleSum3() {
        // B1. Lấy được giá trị trong input
        const valueInput = document.querySelector("#input-ex-6").value;

        // B2. Chuyển đổi String thành Array
        const converString = valueInput.split(",");

        // b3. Đặt biến sum để tính tổng --> let vì giá trị được gán sau mỗi lần lặp

        let sum = 0;
        // B4. Lặp và công từng phần tử trong mảng dùng fofEach()

        converString.forEach((number) => {
          sum += Number(number);
        });

        // B5. Hiển thị kết quả
        const resultElement = document.querySelector("#result-ex-6");
        resultElement.innerHTML = sum;
      }
    </script>
  </body>
</html>
